<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg width="1400" height="900" viewBox="0 0 1400 900" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <style>
      .title { font: 700 26px Inter, Arial, sans-serif; fill: #0b0f19; }
      .subtitle { font: 600 18px Inter, Arial, sans-serif; fill: #0b0f19; }
      .label { font: 500 15px Inter, Arial, sans-serif; fill: #111827; }
      .small { font: 500 13px Inter, Arial, sans-serif; fill: #374151; }
      .box { fill: #ffffff; stroke: #111827; stroke-width: 2; rx: 16; }
      .pill { fill: #F3F4F6; stroke: #9CA3AF; stroke-width: 1.5; rx: 12; }
      .cloud { fill: #F0F9FF; stroke: #0369A1; stroke-width: 2; }
      .db { fill: #F8FAFC; stroke: #0F172A; stroke-width: 2; rx: 16; }
      .arrow { stroke: #111827; stroke-width: 2.5; marker-end: url(#arrowhead); fill: none; }
      .dashed { stroke-dasharray: 6 6; }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#111827" />
    </marker>
  </defs>

  <text x="30" y="50" class="title">TalentFlow AI — System Architecture (cleaned)</text>
  <text x="30" y="78" class="small">Frontend/Backend per README; chatbot, blockchain, and unlearning removed.</text>

  <!-- Left: Roles -->
  <g id="roles">
    <rect class="box" x="40" y="120" width="160" height="210"/>
    <text x="60" y="150" class="subtitle">Roles</text>
    <rect class="pill" x="60" y="170" width="120" height="32"/><text x="75" y="191" class="label">Recruiter</text>
    <rect class="pill" x="60" y="212" width="120" height="32"/><text x="98" y="233" class="label">User</text>
    <rect class="pill" x="60" y="254" width="120" height="32"/><text x="94" y="275" class="label">Admin</text>
  </g>

  <!-- Frontend: Streamlit -->
  <g id="frontend">
    <rect class="box" x="260" y="140" width="280" height="260"/>
    <text x="280" y="170" class="subtitle">Streamlit Web App</text>
    <text x="280" y="195" class="small">Dashboards: Recruiter, User, Admin</text>

    <rect class="pill" x="280" y="210" width="240" height="32"/><text x="292" y="231" class="label">JD Generator (PDF export)</text>
    <rect class="pill" x="280" y="252" width="240" height="32"/><text x="296" y="273" class="label">Resume Screener (Top‑K)</text>
    <rect class="pill" x="280" y="294" width="240" height="32"/><text x="296" y="315" class="label">Interview Assignment</text>
    <rect class="pill" x="280" y="336" width="240" height="32"/><text x="296" y="357" class="label">Interview Results</text>
    <rect class="pill" x="280" y="378" width="240" height="32"/><text x="338" y="399" class="label">Settings</text>
  </g>

  <!-- Backend: FastAPI -->
  <g id="backend">
    <rect class="box" x="620" y="140" width="300" height="420"/>
    <text x="640" y="170" class="subtitle">FastAPI Backend</text>
    <text x="640" y="195" class="small">Routes: auth, jd, resume, interview</text>

    <rect class="pill" x="640" y="210" width="260" height="32"/><text x="700" y="231" class="label">Auth Service</text>
    <rect class="pill" x="640" y="252" width="260" height="32"/><text x="671" y="273" class="label">JD Service</text>
    <rect class="pill" x="640" y="294" width="260" height="32"/><text x="647" y="315" class="label">Resume Screening (Top‑K + Chroma)</text>
    <rect class="pill" x="640" y="336" width="260" height="32"/><text x="673" y="357" class="label">Interview Service</text>
    <rect class="pill" x="640" y="378" width="260" height="32"/><text x="677" y="399" class="label">Whisper STT Service (local)</text>
    <rect class="pill" x="640" y="420" width="260" height="32"/><text x="677" y="441" class="label">TTS Service (Google gTTS)</text>
    <rect class="pill" x="640" y="462" width="260" height="32"/><text x="665" y="483" class="label">LangChain + LangGraph</text>
  </g>

  <!-- Databases -->
  <g id="databases">
    <rect class="db" x="980" y="180" width="180" height="140"/>
    <text x="1006" y="208" class="subtitle">MongoDB</text>
    <text x="996" y="232" class="small">Users, JDs, Interviews,</text>
    <text x="996" y="252" class="small">Results & Metadata</text>

    <rect class="db" x="980" y="350" width="180" height="120"/>
    <text x="1008" y="378" class="subtitle">ChromaDB</text>
    <text x="996" y="402" class="small">Resume embeddings,</text>
    <text x="996" y="422" class="small">Similarity search</text>
  </g>

  <!-- Azure OpenAI -->
  <g id="azure">
    <ellipse class="cloud" cx="1080" cy="80" rx="130" ry="50"/>
    <text x="1000" y="75" class="subtitle">Azure OpenAI</text>
    <text x="980" y="95" class="small">GPT‑4o‑mini + Embeddings</text>
  </g>

  <!-- Voice Services note -->
  <g id="voice">
    <rect class="box" x="260" y="440" width="280" height="120"/>
    <text x="278" y="468" class="subtitle">Voice Path</text>
    <text x="278" y="492" class="small">Candidate speech → Whisper STT</text>
    <text x="278" y="514" class="small">Evaluation → Azure OpenAI</text>
    <text x="278" y="536" class="small">Question audio → Google TTS</text>
  </g>

  <!-- Arrows: Roles -> Frontend -->
  <path class="arrow" d="M200,200 L260,200"/>
  <path class="arrow" d="M200,242 L260,242"/>
  <path class="arrow" d="M200,284 L260,284"/>

  <!-- Frontend -> Backend -->
  <path class="arrow" d="M540,270 L620,270"/>

  <!-- Backend -> DBs -->
  <path class="arrow" d="M920,260 L980,260"/>
  <path class="arrow" d="M920,410 L980,410"/>

  <!-- Backend <-> Azure -->
  <path class="arrow" d="M770,140 C790,110 900,90 950,85"/>
  <path class="arrow dashed" d="M950,85 C900,90 790,110 770,140"/>

  <!-- Voice path: Frontend -> Backend services -->
  <path class="arrow" d="M540,500 L640,500"/>
  <path class="arrow" d="M770,452 L980,452"/>

  <!-- Legend -->
  <g id="legend">
    <rect class="box" x="980" y="520" width="380" height="140"/>
    <text x="1000" y="550" class="subtitle">Legend</text>
    <circle cx="1005" cy="568" r="6" fill="#111827"/><text x="1020" y="572" class="small">Solid arrow: primary flow</text>
    <line x1="995" y1="590" x2="1010" y2="590" class="arrow dashed"/>
    <text x="1020" y="595" class="small">Dashed arrow: response/return</text>
    <rect class="pill" x="995" y="610" width="14" height="14"/><text x="1020" y="622" class="small">Service</text>
    <rect class="db" x="995" y="634" width="14" height="14"/><text x="1020" y="646" class="small">Datastore</text>
    <ellipse class="cloud" cx="1002" cy="666" rx="10" ry="8"/><text x="1020" y="670" class="small">External AI</text>
  </g>
</svg>